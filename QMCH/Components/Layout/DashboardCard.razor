

<div class="dash-card" @onclick="OnClick" role="button" tabindex="0" 
     @onkeydown="@((KeyboardEventArgs e) => HandleKeyDown(e))"
     aria-label="@Label"
     title="Click to navigate to @Label">

    <div class="dash-card-icon @ColorClass">

        @* If Image is provided, show image *@
        @if (!string.IsNullOrEmpty(Image))
        {
            <img src="@Image" alt="@Label" class="dash-card-img" loading="lazy" />
        }
        else
        {
            <i class="@Icon" aria-hidden="true"></i>
        }

    </div>

    <div class="dash-card-value">@Value</div>
    <div class="dash-card-label">@Label</div>

    @if (!string.IsNullOrEmpty(Trend))
    {
        <div class="dash-card-trend @TrendClass" aria-live="polite">
            <i class="fa @TrendIcon" aria-hidden="true"></i>
            @Trend
        </div>
    }
</div>

@code {
    [Parameter] public string Icon { get; set; } = "fa fa-chart-bar";
    [Parameter] public string? Image { get; set; }   
    [Parameter] public string Value { get; set; } = "0";
    [Parameter] public string Label { get; set; } = "Metric";
    [Parameter] public string ColorClass { get; set; } = "blue";
    [Parameter] public string? Trend { get; set; }
    [Parameter] public bool TrendUp { get; set; } = true;
    [Parameter] public EventCallback OnClick { get; set; }

    private string TrendClass => TrendUp ? "up" : "down";
    private string TrendIcon => TrendUp ? "fa-arrow-up" : "fa-arrow-down";

    private async Task HandleKeyDown(KeyboardEventArgs e)
    {
        if (e.Key == "Enter" || e.Key == " ")
        {
            await OnClick.InvokeAsync();
        }
    }
}
