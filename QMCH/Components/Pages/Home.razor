@page "/"
@inject IClientService ClientService 
@inject IEmployeeService EmployeeService 
@inject NavigationManager Navigation
@rendermode InteractiveServer

<PageTitle>Dashboard - QHMC</PageTitle>

<div class="page-header">
    <div class="page-header-left">
        <h1>Dashboard</h1>
        <p>Welcome back! Here's an overview of your healthcare operations.</p>
    </div>
    <div class="page-header-actions">
        <span class="badge badge-info">@TodayDate</span>
    </div>
</div>

<!-- Main Dashboard Cards Grid - 6 Columns -->
<div class="dashboard-grid">
    <DashboardCard Image="images/home/dashboard.jpg"
                   Label="Dashboard"
                   OnClick="@(() => Nav("/dashboard/analytic/view"))" />

    <DashboardCard Image="images/home/client-list.jpg"
                   Label="Clients"
                   OnClick="@(() => Nav("/client/list"))" />

    <DashboardCard Image="images/home/client-type.jpg"
                   Label="Client Types"
                   OnClick="@(() => Nav("client/clienttypes/list"))" />

    <DashboardCard Image="images/home/nurse-list.jpg"
                   Label="Employees"
                   OnClick="@(() => Nav("/caregiver/list"))" />

    <DashboardCard Image="images/home/clasification.jpg"
                   Label="Classifications"
                   OnClick="@(() => Nav("/caregiver/classifications/list"))" />

    <DashboardCard Image="images/home/service_type.jpg"
                   Label="Service Types"
                   OnClick="@(() => Nav("/client/servicetypes/list"))" />

    <DashboardCard Image="images/home/job_order.jpg"
                   Label="Job Orders"
                   OnClick="@(() => Nav("/hr/aquisition/requisition/list"))" />

    <DashboardCard Image="images/home/hr_agencies.jpg"
                   Label="HR Agencies"
                   OnClick="@(() => Nav("/hr/agency/list"))" />

    <DashboardCard Image="images/home/applicant_list.jpg"
                   Label="Applicant List"
                   OnClick="@(() => Nav("/hr/aquisition/applicants/list"))" />

    <DashboardCard Image="images/home/interview.jpg"
                   Label="Interviews"
                   OnClick="@(() => Nav("/hr/aquisition/interview/schedule/list"))" />

    <DashboardCard Image="images/home/medical-appointment.jpg"
                   Label="M.Appointment"
                   OnClick="@(() => Nav("/caregiver/medical/schedule/list"))" />

    <DashboardCard Image="images/home/leave_manager.jpg"
                   Label="Leave Manager"
                   OnClick="@(() => Nav("/leave/grid/list"))" />

    <DashboardCard Image="images/home/nurse_search.jpg"
                   Label="Nurse Search"
                   OnClick="@(() => Nav("/caregiver/search/list"))" />

    <DashboardCard Image="images/home/schedule.jpg"
                   Label="Schedule"
                   OnClick="@(() => Nav("/schedule/calendar"))" />

    <DashboardCard Image="images/home/time_sheet.jpg"
                   Label="Payroll Timesheet"
                   OnClick="@(() => Nav("/timesheet/payroll/list"))" />

    <DashboardCard Image="images/home/time_sheet-one.jpg"
                   Label="Billing Timesheet"
                   OnClick="@(() => Nav("/timesheet/billing/list"))" />

    <DashboardCard Image="images/home/attendance.jpg"
                   Label="Nurse Attendance"
                   OnClick="@(() => Nav("/attendance/list"))" />

    <DashboardCard Image="images/home/hr-report.jpg"
                   Label="HR Reports"
                   OnClick="@(() => Nav("/reports/hr/grid"))" />

    <DashboardCard Image="images/home/operation_report.jpg"
                   Label="Oper. Reports"
                   OnClick="@(() => Nav("/reports/operations"))" />

    <DashboardCard Image="images/home/gps.jpg"
                   Label="GPS Location"
                   OnClick="@(() => Nav("/gps/location"))" />

    <DashboardCard Image="images/home/employee_login.jpg"
                   Label="Employee Login"
                   OnClick="@(() => Nav("/employee/login"))" />

    <DashboardCard Image="images/home/tranining.jpg"
                   Label="Training"
                   OnClick="@(() => Nav("/training/session/list"))" />

    <DashboardCard Image="images/home/employee_role.jpg"
                   Label="Employee Roles"
                   OnClick="@(() => Nav("/admin/roles/list"))" />
</div>

<!-- Services Section - Interactive Grid with Modals -->
<div class="services-section">
    <!-- Services Container -->
    <div class="services-container">
        <!-- ILS Service Card -->
        <div class="service-card" @onclick="@(() => OpenModal("ILS"))">
            <div class="service-card-image">
                <img src="images/home/ils.png" alt="ILS" />
                <span class="service-badge">1</span>
            </div>
            <span class="service-label">ILS</span>
        </div>

        <!-- PLS Service Card -->
        <div class="service-card" @onclick="@(() => OpenModal("PLS"))">
            <div class="service-card-image">
                <img src="images/home/pls.png" alt="PLS" />
                <span class="service-badge">2</span>
            </div>
            <span class="service-label">PLS</span>
        </div>

        <!-- Competency Service Card -->
        <div class="service-card" @onclick="@(() => OpenModal("Competency"))">
            <div class="service-card-image">
                <img src="images/home/competency.png" alt="Competency" />
                <span class="service-badge">3</span>
            </div>
            <span class="service-label">Competency</span>
        </div>

        <!-- Temporary LIC Service Card -->
        <div class="service-card" @onclick="@(() => OpenModal("Temporary Lic"))">
            <div class="service-card-image">
                <img src="images/home/temporary-lic.png" alt="Temporary LIC" />
                <span class="service-badge">4</span>
            </div>
            <span class="service-label">Temporary Lic</span>
        </div>

        <!-- Permanent LIC Service Card -->
        <div class="service-card" @onclick="@(() => OpenModal("Permanent Lic"))">
            <div class="service-card-image">
                <img src="images/home/permanent-lic.png" alt="Permanent LIC" />
                <span class="service-badge">5</span>
            </div>
            <span class="service-label">Permanent Lic</span>
        </div>

        <!-- Prometric Service Card -->
        <div class="service-card" @onclick="@(() => OpenModal("Prometric"))">
            <div class="service-card-image">
                <img src="images/home/prometric.png" alt="Prometric" />
                <span class="service-badge">6</span>
            </div>
            <span class="service-label">Prometric</span>
        </div>

        <!-- QID Service Card -->
        <div class="service-card" @onclick="@(() => OpenModal("QID"))">
            <div class="service-card-image">
                <img src="images/home/qid.png" alt="QID" />
                <span class="service-badge">7</span>
            </div>
            <span class="service-label">QID</span>
        </div>

        <!-- Service Order Card -->
        <div class="service-card" @onclick="@(() => OpenModal("Service Order"))">
            <div class="service-card-image">
                <img src="images/home/service-order.png" alt="Service Order" />
                <span class="service-badge">8</span>
            </div>
            <span class="service-label">Service Order</span>
        </div>
    </div>

    <!-- Modal Overlay -->
    @if (IsModalOpen)
    {
        <div class="modal-overlay" @onclick="CloseModal"></div>

        <!-- Modal Container -->
        <div class="modal-container">
            <!-- Modal Header -->
            <div class="modal-header">
                <h2 class="modal-title">@CurrentModalData?.Title</h2>
                <button class="modal-close" @onclick="CloseModal" aria-label="Close modal">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="6" x2="6" y2="18"></line>
                        <line x1="6" y1="6" x2="18" y2="18"></line>
                    </svg>
                </button>
            </div>

            <!-- Modal Body -->
            <div class="modal-body">
                <!-- Data Table -->
                <table class="modal-table">
                    <thead>
                        <tr>
                            <th>EMPLOYEE#</th>
                            <th>NAME</th>
                            <th>DATE OF E...</th>
                        </tr>
                    </thead>
                    <tbody>
                        @if (CurrentModalData?.TableData != null)
                        {
                            @foreach (var row in CurrentModalData.TableData)
                            {
                                <tr>
                                    <td>@row.EmployeeId</td>
                                    <td>@row.Name</td>
                                    <td>@row.Date</td>
                                </tr>
                            }
                        }
                    </tbody>
                </table>

                <!-- Footer Content -->
                <div class="modal-footer-content">
                    @if (CurrentModalData?.ContentType == "ILS")
                    {
                        <p class="modal-text">@CurrentModalData.Title</p>
                    }
                    else if (CurrentModalData?.ContentType == "PLS")
                    {
                        <ol class="modal-list">
                            @foreach (var item in CurrentModalData.ListItems ?? new List<string>())
                            {
                                <li>@item</li>
                            }
                        </ol>
                    }
                    else if (CurrentModalData?.ContentType == "Table")
                    {
                        <p class="modal-text">@CurrentModalData.Title Data Summary</p>
                    }
                </div>
            </div>
        </div>
    }
</div>
