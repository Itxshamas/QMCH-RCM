@page "/reports/hr/grid"
@inject IReportService ReportService
@rendermode InteractiveServer

<PageTitle>HR Reports - QHMCPro</PageTitle>

<div class="page-header">
    <div class="page-header-left"><h1>HR Reports</h1><p>Human resources analytics and reports</p></div>
    <div class="page-header-actions">
        <select class="form-control" style="width: auto;"><option>Last 30 Days</option><option>Last Quarter</option><option>Year to Date</option></select>
    </div>
</div>

<div class="stats-row">
    <div class="stat-card"><div class="stat-icon green"><i class="fa fa-user-check"></i></div><div class="stat-info"><h4>@reports.Count(r => r.Category == "Hiring")</h4><p>Hiring Reports</p></div></div>
    <div class="stat-card"><div class="stat-icon blue"><i class="fa fa-file-alt"></i></div><div class="stat-info"><h4>@reports.Count(r => r.Category == "Compliance")</h4><p>Compliance Reports</p></div></div>
    <div class="stat-card"><div class="stat-icon orange"><i class="fa fa-graduation-cap"></i></div><div class="stat-info"><h4>@reports.Count(r => r.Category == "Training")</h4><p>Training Reports</p></div></div>
    <div class="stat-card"><div class="stat-icon purple"><i class="fa fa-chart-bar"></i></div><div class="stat-info"><h4>@reports.Count</h4><p>Total Reports</p></div></div>
</div>

<DataGrid TItem="Report" Items="reports" Title="HR Reports" IsLoading="isLoading">
    <HeaderTemplate><th>Title</th><th>Category</th><th>Generated By</th><th>Date</th><th>Status</th></HeaderTemplate>
    <RowTemplate Context="item">
        <td><strong>@item.Title</strong></td>
        <td><span class="badge badge-info">@item.Category</span></td>
        <td>@item.GeneratedBy</td>
        <td>@item.GeneratedDate.ToString("MMM dd, yyyy")</td>
        <td><span class="badge badge-success">@item.Status</span></td>
    </RowTemplate>
</DataGrid>

@code {
    private List<Report> reports = new(); private bool isLoading = true;
    protected override async Task OnInitializedAsync() { isLoading = true; reports = await ReportService.GetHRReportsAsync(); isLoading = false; }
}
