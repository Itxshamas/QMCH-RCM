@page "/hr/agency/list/create"
@inject IHRService HRService
@inject NavigationManager Navigation
@rendermode InteractiveServer

<PageTitle>@(isEdit ? "Edit" : "Create") HR Agency - QMCH</PageTitle>

<div class="page-header">
    <div class="page-header-left">
        <h1>RECRUITMENT AGENCY LIST : @(isEdit ? "EDIT" : "CREATE")</h1>
    </div>
    <div class="page-header-breadcrumb">
        <a href="/recruitment">Recruitment</a> / <a href="/hr/agency/list">Recruitment Agencies</a> / @(isEdit ? "Edit" : "New")
    </div>
</div>

<div class="content-area">
    <div class="form-container">
        <div class="form-header">
            <div class="button-group">
                <button type="button" class="btn btn-cancel" @onclick='() => Navigation.NavigateTo("/hr/agency/list")'>
                    <i class="fa fa-times"></i> Cancel
                </button>
                <button type="button" class="btn btn-save" @onclick="HandleSave">
                    <i class="fa fa-save"></i> Save
                </button>
            </div>
        </div>

        <div class="tabs-container">
            <div class="tabs-header">
                <button class="tab @(activeTab == "agency" ? "active" : "")" 
                        @onclick='() => activeTab = "agency"'>
                    Agency Details
                </button>
                <button class="tab @(activeTab == "contact" ? "active" : "")" 
                        @onclick='() => activeTab = "contact"'>
                    Contact Details
                </button>
                <button class="tab @(activeTab == "account" ? "active" : "")" 
                        @onclick='() => activeTab = "account"'>
                    Account Details
                </button>
            </div>

            <EditForm Model="model" OnValidSubmit="Save" class="form-content">
                <DataAnnotationsValidator />

                @if (activeTab == "agency")
                {
                    <div class="tab-content">
                        <div class="form-group-row">
                            <div class="form-group">
                                <label class="form-label">Agency Name <span class="required">*</span></label>
                                <InputText @bind-Value="model.Name" class="form-control" placeholder="Enter agency name" />
                                <ValidationMessage For="() => model.Name" />
                            </div>
                            <div class="form-group">
                                <label class="form-label">Primary Phone</label>
                                <InputText @bind-Value="model.PrimaryPhone" class="form-control" placeholder="Enter primary phone" />
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Address</label>
                            <InputText @bind-Value="model.Address" class="form-control" placeholder="Enter address" />
                        </div>

                        <div class="form-group-row">
                            <div class="form-group">
                                <label class="form-label">Country</label>
                                <InputSelect @bind-Value="model.Country" class="form-control">
                                    <option value="">Select</option>
                                    @foreach (var country in GetCountries())
                                    {
                                        <option value="@country">@country</option>
                                    }
                                </InputSelect>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Secondary Phone</label>
                                <InputText @bind-Value="model.SecondaryPhone" class="form-control" placeholder="Enter secondary phone" />
                            </div>
                        </div>

                        <div class="form-group-row">
                            <div class="form-group">
                                <label class="form-label">State</label>
                                <InputText @bind-Value="model.State" class="form-control" placeholder="Enter state" />
                            </div>
                            <div class="form-group">
                                <label class="form-label">Fax</label>
                                <InputText @bind-Value="model.Fax" class="form-control" placeholder="Enter fax" />
                            </div>
                        </div>

                        <div class="form-group-row">
                            <div class="form-group">
                                <label class="form-label">City</label>
                                <InputText @bind-Value="model.City" class="form-control" placeholder="Enter city" />
                            </div>
                            <div class="form-group">
                                <label class="form-label">Website URL</label>
                                <InputText @bind-Value="model.WebsiteURL" class="form-control" placeholder="Enter website URL" />
                            </div>
                        </div>
                    </div>
                }

                @if (activeTab == "contact")
                {
                    <div class="tab-content">
                        <div class="form-group">
                            <label class="form-label">Contact Person</label>
                            <InputText @bind-Value="model.ContactPerson" class="form-control" placeholder="Enter contact person name" />
                        </div>

                        <div class="form-group">
                            <label class="form-label">Email</label>
                            <InputText @bind-Value="model.Email" class="form-control" type="email" placeholder="Enter email address" />
                        </div>

                        <div class="form-group">
                            <label class="form-label">Notes</label>
                            <InputTextArea @bind-Value="model.Notes" class="form-control" rows="4" placeholder="Enter additional notes" />
                        </div>
                    </div>
                }

                @if (activeTab == "account")
                {
                    <div class="tab-content">
                        <div class="form-group">
                            <label class="form-label">Status</label>
                            <InputSelect @bind-Value="model.Status" class="form-control">
                                <option value="Active">Active</option>
                                <option value="Inactive">Inactive</option>
                                <option value="Blocked">Blocked</option>
                            </InputSelect>
                        </div>

                        <div class="form-group">
                            <label class="form-checkbox">
                                <InputCheckbox @bind-Value="model.IsWebloginEnabled" />
                                <span>Enable Weblogin</span>
                            </label>
                        </div>
                    </div>
                }
            </EditForm>
        </div>
    </div>
</div>
